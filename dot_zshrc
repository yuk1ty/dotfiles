eval "$(starship init zsh)"
eval "$(jenv init -)"
export PYENV_ROOT="$HOME/.pyenv"
export PATH="$PYENV_ROOT/bin:$PATH"
eval "$(pyenv init -)"

setopt IGNOREEOF
export LANG=ja_JP.UTF-8

autoload -Uz colors
colors

autoload -Uz compinit
compinit

setopt share_history

setopt histignorealldups

HISTFILE=~/.zsh_history
HISTSIZE=10000
SAVEHIST=10000

setopt correct

# alias

alias cat='bat'
alias ls='exa'
alias ll='exa -la'
alias grep='rg'
alias hex='hexyl'
alias prs='procs'
alias gl='tig'
alias awsc='ssh $(grep -w Host ~/.ssh/config | awk '\''{print $2}'\'' | peco) -v'
alias k='kubectl'
alias kc='kubectx | peco | xargs kubectx'
alias lazygit='lazygit -ucd ~/.config/lazygit'

# PATH

PATH=$PATH:/opt/riscv/bin
PATH="/usr/local/opt/llvm@10/bin:$PATH"
PATH="$HOME/.cabal/bin:$PATH"
PATH="/opt/homebrew/opt/mysql-client@5.7/bin:$PATH"

autoload -U +X bashcompinit && bashcompinit
complete -o nospace -C /usr/local/bin/terraform terraform

export PATH="$HOME/.serverless/bin:$PATH"
export PATH="$HOME/.deno/bin:$PATH"
export PATH="$HOME/.poetry/bin:$PATH"
export PATH="$HOME/.pyenv/shims:$PATH"
export PATH="$HOME/.jenv/shims:$PATH"
export PATH=/usr/local/smlnj/bin:"$PATH"

# env

# run `brew` command without any updates
export HOMEBREW_NO_AUTO_UPDATE=1
# for cargo, to be able to access crates on GitHub
export CARGO_NET_GIT_FETCH_WITH_CLI=true

function select-history() {
    BUFFER=$(history -n -r 1 | fzf --no-sort +m --query "$LBUFFER" --prompt="History > ")
    CURSOR=$#BUFFER
}

zle -N select-history
bindkey '^r' select-history
